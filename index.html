<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boo-riculum â€“ School Schedule Deck</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root { --ink:#222; --muted:#444; --accent:#0b78ff; --ok:#22c55e; --bad:#ef4444; }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      color:var(--ink);
      background:url('Booha card.jpg') center/cover fixed no-repeat;
    }
    .wrap{max-width:900px;margin:0 auto;padding:16px 16px 24px;}
    header{
      display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;
      margin-bottom:12px;background:rgba(255,255,255,0.88);padding:12px 16px;
      border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,0.15)
    }
    header h1{
      font-size:18px;margin:0;font-weight:700;letter-spacing:.2px;
      background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      display:flex;align-items:center;gap:8px
    }
    header h1 img{height:28px;width:auto;}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    select,button{
      background:rgba(255,255,255,0.95);color:var(--ink);border:1px solid #ccc;
      border-radius:12px;padding:10px 12px;font-size:14px;
      box-shadow:0 2px 5px rgba(0,0,0,0.08)
    }
    button{cursor:pointer;transition:transform .05s ease, background .2s}
    button:hover{background:#f0f0f0}
    button:active{transform:scale(.98)}
    .pill{border:1px solid #ccc;border-radius:999px;padding:6px 10px;font-size:12px;background:rgba(255,255,255,0.7)}
    .card{
      user-select:none;-webkit-user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;background:url('Booha card.jpg') center/cover no-repeat;
      border:1px solid #ccc;border-radius:24px;min-height:56vh;margin:16px auto;padding:22px 18px 28px;
      box-shadow:0 10px 40px rgba(0,0,0,.25); position:relative;
    }
    .brand{
      position:absolute;top:10px;left:12px;display:flex;gap:8px;align-items:center;
      background:rgba(255,255,255,0.85);padding:6px 10px;border-radius:12px;border:1px solid #ddd;
      box-shadow:0 2px 6px rgba(0,0,0,0.08); font-weight:800; letter-spacing:.2px;
    }
    .brand img{height:20px;width:auto}
    .brand span{background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .label{color:var(--muted);font-size:13px;letter-spacing:.3px;margin-bottom:8px;
      background:rgba(255,255,255,0.7);padding:4px 8px;border-radius:8px}
    .main{font-size:28px;line-height:1.25;font-weight:800;margin:8px 0 10px;
      background:rgba(255,255,255,0.86);padding:8px 12px;border-radius:12px}
    .sub{font-size:18px;opacity:.92;margin:0 0 6px;background:rgba(255,255,255,0.65);
      padding:4px 10px;border-radius:8px}
    .hira{font-size:18px;color:var(--accent);opacity:.95;background:rgba(255,255,255,0.75);
      padding:4px 10px;border-radius:8px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .footer{
      display:flex;align-items:center;justify-content:space-between;margin-top:8px;color:var(--muted);font-size:13px;
      background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1)
    }
    .progress{height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);width:0%}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,minmax(0,1fr));} .main{font-size:24px}}
    a{color:#0b78ff;text-decoration:none}
    .hidden{display:none}
    .options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .optbtn{border:1px solid #ccc;border-radius:12px;padding:10px 14px;background:rgba(255,255,255,0.95);cursor:pointer}
    .optbtn.ok{background:#dcfce7;border-color:#86efac;color:#166534}
    .optbtn.bad{background:#fee2e2;border-color:#fca5a5;color:#991b1b}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1><img src="booha-ghost.png" alt="Booha ghost"> Boo-riculum â€“ School Schedule</h1>
      <div class="controls">
        <select id="mode" aria-label="Mode">
          <option value="vocab-j2e">Vocab: ğŸ‡¯ğŸ‡µ â†’ ğŸ‡ºğŸ‡¸</option>
          <option value="vocab-e2j">Vocab: ğŸ‡ºğŸ‡¸ â†’ ğŸ‡¯ğŸ‡µ</option>
          <option value="sentences">Sentences (practice)</option>
          <option value="qa">Questions (practice)</option>
          <option value="quiz">Quiz (multiple choice)</option>
        </select>
      </div>
    </header>

    <div id="card" class="card" role="button" aria-label="flashcard" tabindex="0">
      <div class="brand"><img src="booha-ghost.png" alt="Booha ghost"><span>Boo-riculum</span></div>
      <div id="label" class="label">Front</div>
      <div id="main" class="main">â€”</div>
      <div id="sub" class="sub muted">Tap or press Space to flip</div>
      <div id="hira" class="hira hidden"></div>
      <div id="mcArea" class="options hidden"></div>
    </div>

    <div class="footer">
      <div class="row">
        <span class="pill" title="Left / Right keys">Keyboard: â† â†’</span>
        <span class="pill" title="Space to flip">Space = Flip</span>
        <button id="btnPrev" title="â† or swipe right">â—€ï¸ Prev</button>
        <button id="btnFlip" title="Tap / Space">Flip</button>
        <button id="btnNext" title="â†’ or swipe left">Next â–¶ï¸</button>
        <button id="btnShuffle" title="Shuffle deck">Shuffle</button>
      </div>
      <div style="min-width:180px;text-align:right">
        <div id="counter" class="muted">0 / 0</div>
        <div class="progress" aria-hidden="true"><span id="bar"></span></div>
      </div>
    </div>

    <section style="margin-top:18px">
      <details>
        <summary class="muted">Deck contents & teacher notes</summary>
        <div class="grid" style="margin-top:10px">
          <div><strong>Vocab (13)</strong><br>
            class / æˆæ¥­ï¼ˆã¹ã‚“ãã‚‡ã†ã®ã˜ã‹ã‚“ï¼‰<br>
            break / ä¼‘ã¿æ™‚é–“ï¼ˆã‚„ã™ã‚€ã˜ã‹ã‚“ï¼‰<br>
            lunch / æ˜¼é£Ÿï¼ˆãŠã²ã‚‹ã”ã¯ã‚“ï¼‰<br>
            period / æ™‚é–“å¸¯ï¼ˆã˜ã‹ã‚“ã®ã¶ã‚“ï¼‰<br>
            morning / åˆå‰ï¼ˆã”ãœã‚“ï¼‰<br>
            afternoon / åˆå¾Œï¼ˆã”ã”ï¼‰<br>
            Monday / æœˆæ›œæ—¥ï¼ˆã’ã¤ã‚ˆã†ã³ï¼‰<br>
            Tuesday / ç«æ›œæ—¥ï¼ˆã‹ã‚ˆã†ã³ï¼‰<br>
            Wednesday / æ°´æ›œæ—¥ï¼ˆã™ã„ã‚ˆã†ã³ï¼‰<br>
            Thursday / æœ¨æ›œæ—¥ï¼ˆã‚‚ãã‚ˆã†ã³ï¼‰<br>
            Friday / é‡‘æ›œæ—¥ï¼ˆãã‚“ã‚ˆã†ã³ï¼‰<br>
            Saturday / åœŸæ›œæ—¥ï¼ˆã©ã‚ˆã†ã³ï¼‰<br>
            Sunday / æ—¥æ›œæ—¥ï¼ˆã«ã¡ã‚ˆã†ã³ï¼‰
          </div>
          <div><strong>Sentences (12)</strong><br>
            Itâ€™s 10:00. / ä»Šã¯10æ™‚ã§ã™ã€‚<br>
            Itâ€™s 2:30. / ä»Šã¯2æ™‚åŠã§ã™ã€‚<br>
            The class starts at 9:00. / ã‚¯ãƒ©ã‚¹ã¯9æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚<br>
            We have a break at 10:30. / ç§ãŸã¡ã¯10æ™‚åŠã«ä¼‘æ†©ã‚’å–ã‚Šã¾ã™ã€‚<br>
            Lunch is at 12:00. / æ˜¼ã”ã¯ã‚“ã¯12æ™‚ã§ã™ã€‚<br>
            The afternoon class starts at 1:00. / åˆå¾Œã®ã‚¯ãƒ©ã‚¹ã¯1æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚<br>
            My English class is on Monday. / ç§ã®è‹±èªã®ã‚¯ãƒ©ã‚¹ã¯æœˆæ›œæ—¥ã§ã™ã€‚<br>
            We have art on Wednesday. / æ°´æ›œæ—¥ã«ç¾è¡“ãŒã‚ã‚Šã¾ã™ã€‚<br>
            I have physical education on Thursday. / æœ¨æ›œæ—¥ã«ä½“è‚²ã®æˆæ¥­ãŒã‚ã‚Šã¾ã™ã€‚<br>
            Friday is our last day of the week. / é‡‘æ›œæ—¥ã¯ç§ãŸã¡ã®ä¸€é€±é–“ã®æœ€å¾Œã®æ—¥ã§ã™ã€‚<br>
            I enjoy my lunch break. / æ˜¼ä¼‘ã¿ãŒæ¥½ã—ã„ã§ã™ã€‚<br>
            We have 5 periods today. / ä»Šæ—¥ã¯5æ™‚é–“ç›®ãŒã‚ã‚Šã¾ã™ã€‚
          </div>
          <div><strong>Tips</strong><br>
            â€¢ Use <em>Vocab</em> for quick output drills (JPâ†’EN or ENâ†’JP).<br>
            â€¢ Move to <em>Sentences</em> for controlled production (shows kana on front/back).<br>
            â€¢ Use <em>Questions</em> for pair Q&A (answers not MC).<br>
            â€¢ Finish with <em>Quiz</em> (4 options: 1 correct + 3 wrong, instant reveal â†’ auto-flip).<br>
            â€¢ Simple Japanese (kana) shows under Japanese lines.
          </div>
        </div>
      </details>
    </section>
  </div>

  <script>
    // ---------------- Data ----------------
    const VOCAB = [
      { en: 'class',      ja: 'æˆæ¥­',     hira: 'ã¹ã‚“ãã‚‡ã†ã® ã˜ã‹ã‚“' },
      { en: 'break',      ja: 'ä¼‘ã¿æ™‚é–“', hira: 'ã‚„ã™ã‚€ ã˜ã‹ã‚“' },
      { en: 'lunch',      ja: 'æ˜¼é£Ÿ',     hira: 'ãŠã²ã‚‹ã”ã¯ã‚“' },
      { en: 'period',     ja: 'æ™‚é–“å¸¯',   hira: 'ã˜ã‹ã‚“ ã® ã¶ã‚“' },
      { en: 'morning',    ja: 'åˆå‰',     hira: 'ã”ãœã‚“' },
      { en: 'afternoon',  ja: 'åˆå¾Œ',     hira: 'ã”ã”' },
      { en: 'Monday',     ja: 'æœˆæ›œæ—¥',   hira: 'ã’ã¤ã‚ˆã†ã³' },
      { en: 'Tuesday',    ja: 'ç«æ›œæ—¥',   hira: 'ã‹ã‚ˆã†ã³' },
      { en: 'Wednesday',  ja: 'æ°´æ›œæ—¥',   hira: 'ã™ã„ã‚ˆã†ã³' },
      { en: 'Thursday',   ja: 'æœ¨æ›œæ—¥',   hira: 'ã‚‚ãã‚ˆã†ã³' },
      { en: 'Friday',     ja: 'é‡‘æ›œæ—¥',   hira: 'ãã‚“ã‚ˆã†ã³' },
      { en: 'Saturday',   ja: 'åœŸæ›œæ—¥',   hira: 'ã©ã‚ˆã†ã³' },
      { en: 'Sunday',     ja: 'æ—¥æ›œæ—¥',   hira: 'ã«ã¡ã‚ˆã†ã³' },
    ];

    const SENTENCES = [
      { en:'Itâ€™s 10:00.', ja:'ä»Šã¯10æ™‚ã§ã™ã€‚', hira:'ã„ã¾ã¯ ã˜ã‚…ã†ã˜ ã§ã™ã€‚' },
      { en:'Itâ€™s 2:30.', ja:'ä»Šã¯2æ™‚åŠã§ã™ã€‚', hira:'ã„ã¾ã¯ ã«ã˜ ã¯ã‚“ ã§ã™ã€‚' },
      { en:'The class starts at 9:00.', ja:'ã‚¯ãƒ©ã‚¹ã¯9æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚', hira:'ã‚¯ãƒ©ã‚¹ã¯ ãã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã€‚' },
      { en:'We have a break at 10:30.', ja:'ç§ãŸã¡ã¯10æ™‚åŠã«ä¼‘æ†©ã‚’å–ã‚Šã¾ã™ã€‚', hira:'ã‚ãŸã—ãŸã¡ã¯ ã˜ã‚…ã†ã˜ ã¯ã‚“ã« ãã‚…ã†ã‘ã„ã‚’ ã¨ã‚Šã¾ã™ã€‚' },
      { en:'Lunch is at 12:00.', ja:'æ˜¼ã”ã¯ã‚“ã¯12æ™‚ã§ã™ã€‚', hira:'ã²ã‚‹ã”ã¯ã‚“ã¯ ã˜ã‚…ã†ã«ã˜ ã§ã™ã€‚' },
      { en:'The afternoon class starts at 1:00.', ja:'åˆå¾Œã®ã‚¯ãƒ©ã‚¹ã¯1æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚', hira:'ã”ã”ã® ã‚¯ãƒ©ã‚¹ã¯ ã„ã¡ã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã€‚' },
      { en:'My English class is on Monday.', ja:'ç§ã®è‹±èªã®ã‚¯ãƒ©ã‚¹ã¯æœˆæ›œæ—¥ã§ã™ã€‚', hira:'ã‚ãŸã—ã® ãˆã„ã”ã® ã‚¯ãƒ©ã‚¹ã¯ ã’ã¤ã‚ˆã†ã³ ã§ã™ã€‚' },
      { en:'We have art on Wednesday.', ja:'æ°´æ›œæ—¥ã«ç¾è¡“ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã™ã„ã‚ˆã†ã³ã« ã³ã˜ã‚…ã¤ãŒ ã‚ã‚Šã¾ã™ã€‚' },
      { en:'I have physical education on Thursday.', ja:'æœ¨æ›œæ—¥ã«ä½“è‚²ã®æˆæ¥­ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã‚‚ãã‚ˆã†ã³ã« ãŸã„ã„ãã® ã˜ã‚…ãã‚‡ã†ãŒ ã‚ã‚Šã¾ã™ã€‚' },
      { en:'Friday is our last day of the week.', ja:'é‡‘æ›œæ—¥ã¯ç§ãŸã¡ã®ä¸€é€±é–“ã®æœ€å¾Œã®æ—¥ã§ã™ã€‚', hira:'ãã‚“ã‚ˆã†ã³ã¯ ã‚ãŸã—ãŸã¡ã® ã„ã£ã—ã‚…ã†ã‹ã‚“ã® ã•ã„ã”ã® ã² ã§ã™ã€‚' },
      { en:'I enjoy my lunch break.', ja:'æ˜¼ä¼‘ã¿ãŒæ¥½ã—ã„ã§ã™ã€‚', hira:'ã²ã‚‹ã‚„ã™ã¿ãŒ ãŸã®ã—ã„ ã§ã™ã€‚' },
      { en:'We have 5 periods today.', ja:'ä»Šæ—¥ã¯5æ™‚é–“ç›®ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ãã‚‡ã†ã¯ ã” ã˜ã‹ã‚“ã‚ ãŒ ã‚ã‚Šã¾ã™ã€‚' },
    ];

    const QA = [
      { q_en:'What time is it now?', q_ja:'ä»Šã¯ä½•æ™‚ã§ã™ã‹ã€‚', q_hira:'ã„ã¾ã¯ ãªã‚“ã˜ ã§ã™ã‹ã€‚',
        a_en:'Itâ€™s 10:00.', a_ja:'ä»Šã¯10æ™‚ã§ã™ã€‚', a_hira:'ã„ã¾ã¯ ã˜ã‚…ã†ã˜ ã§ã™ã€‚' },
      { q_en:'What time is it now?', q_ja:'ä»Šã¯ä½•æ™‚ã§ã™ã‹ã€‚', q_hira:'ã„ã¾ã¯ ãªã‚“ã˜ ã§ã™ã‹ã€‚',
        a_en:'Itâ€™s 2:30.', a_ja:'ä»Šã¯2æ™‚åŠã§ã™ã€‚', a_hira:'ã„ã¾ã¯ ã«ã˜ ã¯ã‚“ ã§ã™ã€‚' },
      { q_en:'When does the class start?', q_ja:'ã‚¯ãƒ©ã‚¹ã¯ä½•æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã‹ã€‚', q_hira:'ã‚¯ãƒ©ã‚¹ã¯ ãªã‚“ã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã‹ã€‚',
        a_en:'The class starts at 9:00.', a_ja:'ã‚¯ãƒ©ã‚¹ã¯9æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚', a_hira:'ã‚¯ãƒ©ã‚¹ã¯ ãã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã€‚' },
      { q_en:'When is the break?', q_ja:'ä¼‘æ†©ã¯ä½•æ™‚ã§ã™ã‹ã€‚', q_hira:'ãã‚…ã†ã‘ã„ã¯ ãªã‚“ã˜ ã§ã™ã‹ã€‚',
        a_en:'We have a break at 10:30.', a_ja:'ç§ãŸã¡ã¯10æ™‚åŠã«ä¼‘æ†©ã‚’å–ã‚Šã¾ã™ã€‚', a_hira:'ã‚ãŸã—ãŸã¡ã¯ ã˜ã‚…ã†ã˜ ã¯ã‚“ã« ãã‚…ã†ã‘ã„ã‚’ ã¨ã‚Šã¾ã™ã€‚' },
      { q_en:'When is lunch?', q_ja:'æ˜¼ã”ã¯ã‚“ã¯ä½•æ™‚ã§ã™ã‹ã€‚', q_hira:'ã²ã‚‹ã”ã¯ã‚“ã¯ ãªã‚“ã˜ ã§ã™ã‹ã€‚',
        a_en:'Lunch is at 12:00.', a_ja:'æ˜¼ã”ã¯ã‚“ã¯12æ™‚ã§ã™ã€‚', a_hira:'ã²ã‚‹ã”ã¯ã‚“ã¯ ã˜ã‚…ã†ã«ã˜ ã§ã™ã€‚' },
      { q_en:'When does the afternoon class start?', q_ja:'åˆå¾Œã®ã‚¯ãƒ©ã‚¹ã¯ä½•æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã‹ã€‚', q_hira:'ã”ã”ã® ã‚¯ãƒ©ã‚¹ã¯ ãªã‚“ã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã‹ã€‚',
        a_en:'The afternoon class starts at 1:00.', a_ja:'åˆå¾Œã®ã‚¯ãƒ©ã‚¹ã¯1æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚', a_hira:'ã”ã”ã® ã‚¯ãƒ©ã‚¹ã¯ ã„ã¡ã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã€‚' },
      { q_en:'When is your English class?', q_ja:'è‹±èªã®ã‚¯ãƒ©ã‚¹ã¯ä½•æ›œæ—¥ã§ã™ã‹ã€‚', q_hira:'ãˆã„ã”ã® ã‚¯ãƒ©ã‚¹ã¯ ãªã«ã‚ˆã†ã³ ã§ã™ã‹ã€‚',
        a_en:'My English class is on Monday.', a_ja:'ç§ã®è‹±èªã®ã‚¯ãƒ©ã‚¹ã¯æœˆæ›œæ—¥ã§ã™ã€‚', a_hira:'ã‚ãŸã—ã® ãˆã„ã”ã® ã‚¯ãƒ©ã‚¹ã¯ ã’ã¤ã‚ˆã†ã³ ã§ã™ã€‚' },
      { q_en:'What do we have on Wednesday?', q_ja:'æ°´æ›œæ—¥ã«ã¯ä½•ã®æˆæ¥­ãŒã‚ã‚Šã¾ã™ã‹ã€‚', q_hira:'ã™ã„ã‚ˆã†ã³ã«ã¯ ãªã«ã® ã˜ã‚…ãã‚‡ã†ãŒ ã‚ã‚Šã¾ã™ã‹ã€‚',
        a_en:'We have art on Wednesday.', a_ja:'æ°´æ›œæ—¥ã«ç¾è¡“ãŒã‚ã‚Šã¾ã™ã€‚', a_hira:'ã™ã„ã‚ˆã†ã³ã« ã³ã˜ã‚…ã¤ãŒ ã‚ã‚Šã¾ã™ã€‚' },
      { q_en:'What class do you have on Thursday?', q_ja:'æœ¨æ›œæ—¥ã«ã¯ä½•ã®æˆæ¥­ãŒã‚ã‚Šã¾ã™ã‹ã€‚', q_hira:'ã‚‚ãã‚ˆã†ã³ã«ã¯ ãªã«ã® ã˜ã‚…ãã‚‡ã†ãŒ ã‚ã‚Šã¾ã™ã‹ã€‚',
        a_en:'I have physical education on Thursday.', a_ja:'æœ¨æ›œæ—¥ã«ä½“è‚²ã®æˆæ¥­ãŒã‚ã‚Šã¾ã™ã€‚', a_hira:'ã‚‚ãã‚ˆã†ã³ã« ãŸã„ã„ãã® ã˜ã‚…ãã‚‡ã†ãŒ ã‚ã‚Šã¾ã™ã€‚' },
      { q_en:'What is our last day of the week?', q_ja:'ä¸€é€±é–“ã®æœ€å¾Œã®æ—¥ã¯ä½•æ›œæ—¥ã§ã™ã‹ã€‚', q_hira:'ã„ã£ã—ã‚…ã†ã‹ã‚“ ã® ã•ã„ã” ã® ã² ã¯ ãªã«ã‚ˆã†ã³ ã§ã™ã‹ã€‚',
        a_en:'Friday is our last day of the week.', a_ja:'é‡‘æ›œæ—¥ã¯ç§ãŸã¡ã®ä¸€é€±é–“ã®æœ€å¾Œã®æ—¥ã§ã™ã€‚', a_hira:'ãã‚“ã‚ˆã†ã³ã¯ ã‚ãŸã—ãŸã¡ã® ã„ã£ã—ã‚…ã†ã‹ã‚“ã® ã•ã„ã”ã® ã² ã§ã™ã€‚' },
      { q_en:'How do you feel about your lunch break?', q_ja:'æ˜¼ä¼‘ã¿ã¯ã©ã†æ„Ÿã˜ã¾ã™ã‹ã€‚', q_hira:'ã²ã‚‹ã‚„ã™ã¿ã¯ ã©ã† ã‹ã‚“ã˜ã¾ã™ã‹ã€‚',
        a_en:'I enjoy my lunch break.', a_ja:'æ˜¼ä¼‘ã¿ãŒæ¥½ã—ã„ã§ã™ã€‚', a_hira:'ã²ã‚‹ã‚„ã™ã¿ãŒ ãŸã®ã—ã„ ã§ã™ã€‚' },
      { q_en:'How many periods do we have today?', q_ja:'ä»Šæ—¥ã¯ä½•æ™‚é–“ç›®ãŒã‚ã‚Šã¾ã™ã‹ã€‚', q_hira:'ãã‚‡ã†ã¯ ãªã‚“ ã˜ã‹ã‚“ã‚ãŒ ã‚ã‚Šã¾ã™ã‹ã€‚',
        a_en:'We have 5 periods today.', a_ja:'ä»Šæ—¥ã¯5æ™‚é–“ç›®ãŒã‚ã‚Šã¾ã™ã€‚', a_hira:'ãã‚‡ã†ã¯ ã” ã˜ã‹ã‚“ã‚ãŒ ã‚ã‚Šã¾ã™ã€‚' },
    ];

    // Quiz with exactly 4 options (1 correct + 3 wrong)
    const QUIZ = [
      { prompt:'Choose the correct time: Itâ€™s ____.', correct:'10:00', jp:'ä»Šã¯10æ™‚ã§ã™ã€‚', hira:'ã„ã¾ã¯ ã˜ã‚…ã†ã˜ ã§ã™ã€‚', full:'Itâ€™s 10:00.' },
      { prompt:'Choose the correct time: Itâ€™s ____.', correct:'2:30', jp:'ä»Šã¯2æ™‚åŠã§ã™ã€‚', hira:'ã„ã¾ã¯ ã«ã˜ ã¯ã‚“ ã§ã™ã€‚', full:'Itâ€™s 2:30.' },
      { prompt:'When does the class start? ____', correct:'9:00', jp:'ã‚¯ãƒ©ã‚¹ã¯9æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚', hira:'ã‚¯ãƒ©ã‚¹ã¯ ãã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã€‚', full:'The class starts at 9:00.' },
      { prompt:'When is the break? ____', correct:'10:30', jp:'ç§ãŸã¡ã¯10æ™‚åŠã«ä¼‘æ†©ã‚’å–ã‚Šã¾ã™ã€‚', hira:'ã‚ãŸã—ãŸã¡ã¯ ã˜ã‚…ã†ã˜ ã¯ã‚“ã« ãã‚…ã†ã‘ã„ã‚’ ã¨ã‚Šã¾ã™ã€‚', full:'We have a break at 10:30.' },
      { prompt:'When is lunch? ____', correct:'12:00', jp:'æ˜¼ã”ã¯ã‚“ã¯12æ™‚ã§ã™ã€‚', hira:'ã²ã‚‹ã”ã¯ã‚“ã¯ ã˜ã‚…ã†ã«ã˜ ã§ã™ã€‚', full:'Lunch is at 12:00.' },
      { prompt:'When does the afternoon class start? ____', correct:'1:00', jp:'åˆå¾Œã®ã‚¯ãƒ©ã‚¹ã¯1æ™‚ã«å§‹ã¾ã‚Šã¾ã™ã€‚', hira:'ã”ã”ã® ã‚¯ãƒ©ã‚¹ã¯ ã„ã¡ã˜ã« ã¯ã˜ã¾ã‚Šã¾ã™ã€‚', full:'The afternoon class starts at 1:00.' },
      { prompt:'Your English class is on ____.', correct:'Monday', jp:'ç§ã®è‹±èªã®ã‚¯ãƒ©ã‚¹ã¯æœˆæ›œæ—¥ã§ã™ã€‚', hira:'ã’ã¤ã‚ˆã†ã³ ã§ã™ã€‚', full:'My English class is on Monday.' },
      { prompt:'We have art on ____.', correct:'Wednesday', jp:'æ°´æ›œæ—¥ã«ç¾è¡“ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã™ã„ã‚ˆã†ã³ã« ã³ã˜ã‚…ã¤ãŒ ã‚ã‚Šã¾ã™ã€‚', full:'We have art on Wednesday.' },
      { prompt:'I have physical education on ____.', correct:'Thursday', jp:'æœ¨æ›œæ—¥ã«ä½“è‚²ã®æˆæ¥­ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ã‚‚ãã‚ˆã†ã³ã« ãŸã„ã„ãã® ã˜ã‚…ãã‚‡ã†ãŒ ã‚ã‚Šã¾ã™ã€‚', full:'I have physical education on Thursday.' },
      { prompt:'Our last day of the week is ____.', correct:'Friday', jp:'é‡‘æ›œæ—¥ã¯ç§ãŸã¡ã®ä¸€é€±é–“ã®æœ€å¾Œã®æ—¥ã§ã™ã€‚', hira:'ãã‚“ã‚ˆã†ã³ã¯ ã•ã„ã”ã® ã² ã§ã™ã€‚', full:'Friday is our last day of the week.' },
      { prompt:'I enjoy my ____ break.', correct:'lunch', jp:'æ˜¼ä¼‘ã¿ãŒæ¥½ã—ã„ã§ã™ã€‚', hira:'ã²ã‚‹ã‚„ã™ã¿ãŒ ãŸã®ã—ã„ ã§ã™ã€‚', full:'I enjoy my lunch break.' },
      { prompt:'Today we have ____ periods.', correct:'5', jp:'ä»Šæ—¥ã¯5æ™‚é–“ç›®ãŒã‚ã‚Šã¾ã™ã€‚', hira:'ãã‚‡ã†ã¯ ã” ã˜ã‹ã‚“ã‚ãŒ ã‚ã‚Šã¾ã™ã€‚', full:'We have 5 periods today.' },
    ];

    // -------------- State & Elements --------------
    let deck = [];
    let index = 0;
    let showingFront = true;

    const els = {
      mode: document.getElementById('mode'),
      card: document.getElementById('card'),
      label: document.getElementById('label'),
      main: document.getElementById('main'),
      sub: document.getElementById('sub'),
      hira: document.getElementById('hira'),
      counter: document.getElementById('counter'),
      bar: document.getElementById('bar'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      btnFlip: document.getElementById('btnFlip'),
      btnShuffle: document.getElementById('btnShuffle'),
      mcArea: document.getElementById('mcArea'),
    };

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
      return arr;
    }

    // -------------- Build Decks --------------
    function buildDeck(){
      const mode = els.mode.value;
      if(mode==='vocab-j2e' || mode==='vocab-e2j'){
        const data = VOCAB;
        deck = data.map(x=>({
          type:'vocab',
          front: mode==='vocab-j2e' ? x.ja : x.en,
          back:  mode==='vocab-j2e' ? x.en : x.ja,
          hira: x.hira,
          sideLabelFront: mode==='vocab-j2e' ? 'Japanese â†’ English' : 'English â†’ Japanese',
          sideLabelBack:  mode==='vocab-j2e' ? 'English' : 'Japanese',
        }));
      } else if(mode==='sentences'){
        deck = SENTENCES.map(s=>({
          type:'sentence',
          front: s.ja,
          back: s.en + '\n' + s.ja,
          hira: s.hira,
          sideLabelFront: 'Japanese sentence',
          sideLabelBack: 'Answer (EN + JA)',
        }));
      } else if(mode==='qa'){
        deck = QA.map(q=>({
          type:'qa',
          front: q.q_ja,
          back: q.a_en + '\n' + q.a_ja,
          hira: q.q_hira + '\n' + q.a_hira,
          sideLabelFront: 'Question (JA)',
          sideLabelBack: 'Answer (EN + JA)',
        }));
      } else if(mode==='quiz'){
        deck = QUIZ.map(q=>{
          const pool = ['10:00','2:30','9:00','10:30','12:00','1:00',
                        'Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday',
                        'lunch','break','class','period','5'];
          const wrongs = shuffle(pool.filter(x=>x!==q.correct)).slice(0,3);
          const choices = shuffle([q.correct, ...wrongs]);
          return {
            type:'quiz',
            front: q.prompt,
            back: q.full + '\n' + q.jp,
            hira: q.hira,
            correct: q.correct,
            choices,
            sideLabelFront: 'Multiple choice (4 options)',
            sideLabelBack: 'Answer (EN + JA)',
          };
        });
      }
      index = 0; showingFront = true; render();
    }

    // -------------- Render --------------
    function render(){
      if(deck.length===0){ els.main.textContent='â€”'; els.sub.textContent='No cards'; els.counter.textContent='0 / 0'; return; }
      const item = deck[index];
      const mode = els.mode.value;
      els.label.textContent = showingFront ? item.sideLabelFront : item.sideLabelBack;

      const content = showingFront ? item.front : item.back;
      if((!showingFront) && (item.type==='qa' || item.type==='quiz' || item.type==='sentence') && content.includes('\n')){
        const [line1, line2] = content.split('\n');
        els.main.innerHTML = `<div style="font-size:22px;font-weight:700">${line1}</div>
                              <div class="sub" style="margin-top:8px">${line2}</div>`;
        if(item.hira){
          els.hira.classList.remove('hidden');
          if(item.type==='qa'){
            const parts = item.hira.split('\n');
            els.hira.textContent = showingFront ? parts[0] : (parts[1] || '');
          } else {
            els.hira.textContent = item.hira;
          }
        } else { els.hira.classList.add('hidden'); els.hira.textContent=''; }
      } else {
        els.main.textContent = content;
        if(showingFront && (item.type==='vocab' && (els.mode.value==='vocab-j2e') || item.type==='sentence' || item.type==='qa')){
          if(item.hira){
            els.hira.classList.remove('hidden');
            if(item.type==='qa' && item.hira.includes('\n')){
              els.hira.textContent = item.hira.split('\n')[0];
            } else {
              els.hira.textContent = item.hira;
            }
          } else { els.hira.classList.add('hidden'); els.hira.textContent=''; }
        } else {
          els.hira.classList.add('hidden');
          els.hira.textContent='';
        }
      }

      // QUIZ MC only on front
      if(mode==='quiz' && item.type==='quiz' && showingFront){
        els.sub.textContent = 'Choose the best answer.';
        els.mcArea.classList.remove('hidden');
        els.mcArea.innerHTML = '';
        item.choices.forEach((opt, i) => {
          const btn = document.createElement('button');
          btn.className = 'optbtn';
          btn.textContent = `${i+1}. ${opt}`;
          btn.addEventListener('click', (e)=>{
            e.preventDefault(); e.stopPropagation();
            const allBtns = [...els.mcArea.querySelectorAll('button')];
            allBtns.forEach(b=>b.disabled=true);
            if(opt===item.correct){ btn.classList.add('ok'); } else { btn.classList.add('bad'); }
            const correctBtn = allBtns.find(b=>b.textContent.endsWith(item.correct));
            if(correctBtn) correctBtn.classList.add('ok');
            setTimeout(()=>{ showingFront=false; render(); }, 350);
          }, { passive:false });
          els.mcArea.appendChild(btn);
        });
      } else {
        els.mcArea.classList.add('hidden');
        els.mcArea.innerHTML = '';
        els.sub.textContent = (item.type==='quiz' && showingFront)
          ? 'Choose the best answer.'
          : 'Tap / Space to flip Â· Swipe / â† â†’ to navigate';
      }

      els.counter.textContent = `${index+1} / ${deck.length}`;
      els.bar.style.width = `${((index+1)/deck.length)*100}%`;

      setHash();
    }

    // -------------- Navigation --------------
    function prev(){ index = (index-1+deck.length)%deck.length; showingFront=true; render(); }
    function next(){ index = (index+1)%deck.length; showingFront=true; render(); }
    function flip(){ showingFront = !showingFront; render(); }
    function shuffleDeck(){ deck = shuffle(deck); index=0; showingFront=true; render(); }

    document.getElementById('btnPrev').addEventListener('click', prev);
    document.getElementById('btnNext').addEventListener('click', next);
    document.getElementById('btnFlip').addEventListener('click', flip);
    document.getElementById('btnShuffle').addEventListener('click', shuffleDeck);
    document.getElementById('mode').addEventListener('change', ()=>{ buildDeck(); setHash(); });

    // Keyboard
    window.addEventListener('keydown', (e)=>{
      if(e.code==='ArrowLeft'){ e.preventDefault(); prev(); }
      else if(e.code==='ArrowRight'){ e.preventDefault(); next(); }
      else if(e.code==='Space'){ e.preventDefault(); flip(); }
      else if(e.key==='S' || e.key==='s'){ e.preventDefault(); shuffleDeck(); }
      else if(e.key==='1' && document.getElementById('mode').value==='quiz'){ const b=document.querySelectorAll('#mcArea button')[0]; if(b) b.click(); }
      else if(e.key==='2' && document.getElementById('mode').value==='quiz'){ const b=document.querySelectorAll('#mcArea button')[1]; if(b) b.click(); }
      else if(e.key==='3' && document.getElementById('mode').value==='quiz'){ const b=document.querySelectorAll('#mcArea button')[2]; if(b) b.click(); }
      else if(e.key==='4' && document.getElementById('mode').value==='quiz'){ const b=document.querySelectorAll('#mcArea button')[3]; if(b) b.click(); }
    });

    // Click/Touch to flip (disabled on Quiz front)
    document.getElementById('card').addEventListener('click', (e)=>{
      if(document.getElementById('mode').value==='quiz' && showingFront) return;
      flip();
    }, { passive:true });

    // Swipe
    let touchStartX=null, touchStartY=null;
    document.getElementById('card').addEventListener('touchstart', (e)=>{
      const t=e.changedTouches[0]; touchStartX=t.clientX; touchStartY=t.clientY;
    }, {passive:true});
    document.getElementById('card').addEventListener('touchend', (e)=>{
      const t=e.changedTouches[0]; if(touchStartX===null) return;
      const dx=t.clientX - touchStartX; const dy=t.clientY - touchStartY;
      if(Math.abs(dx)>50 && Math.abs(dx)>Math.abs(dy)){
        if(dx>0) prev(); else next();
      } else if(Math.abs(dy)<10 && Math.abs(dx)<10){
        if(!(document.getElementById('mode').value==='quiz' && showingFront)) flip();
      }
      touchStartX=touchStartY=null;
    }, {passive:true});

    // -------------- URL Hash --------------
    function setHash(){ location.hash = `#${document.getElementById('mode').value}:${index}`; }
    function readHash(){
      const h = location.hash.replace('#','');
      if(!h) return;
      const [m, i] = h.split(':');
      const modeEl = document.getElementById('mode');
      if(m && [...modeEl.options].some(o=>o.value===m)) modeEl.value = m;
      const n = Number(i);
      if(!Number.isNaN(n)) index = Math.max(0, Math.min(deck.length-1, n));
    }

    // Init
    function init(){ buildDeck(); readHash(); render(); }
    init();
  </script>
</body>
</html>
